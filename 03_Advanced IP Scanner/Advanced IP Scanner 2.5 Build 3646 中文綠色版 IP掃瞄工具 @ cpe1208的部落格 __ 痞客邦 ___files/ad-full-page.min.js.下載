!function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=e(t((function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}))),i=t((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),o=t((function(e){var t=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=t)})),r=(o.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),a=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}},l=function(e){return"object"==typeof e?null!==e:"function"==typeof e},s=function(e){if(!l(e))throw TypeError(e+" is not an object!");return e},u=function(e){try{return!!e()}catch(e){return!0}},c=!u((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),d=i.document,f=l(d)&&l(d.createElement),p=function(e){return f?d.createElement(e):{}},h=!c&&!u((function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a})),v=function(e,t){if(!l(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!l(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!l(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!l(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,m={f:c?Object.defineProperty:function(e,t,n){if(s(e),t=v(t,!0),s(n),h)try{return g(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},y=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},w=c?function(e,t,n){return m.f(e,t,y(1,n))}:function(e,t,n){return e[t]=n,e},b=function(e,t,n){var r,l,s,u=e&b.F,c=e&b.G,d=e&b.S,f=e&b.P,p=e&b.B,h=e&b.W,v=c?o:o[t]||(o[t]={}),g=v.prototype,m=c?i:d?i[t]:(i[t]||{}).prototype;for(r in c&&(n=t),n)(l=!u&&m&&void 0!==m[r])&&r in v||(s=l?m[r]:n[r],v[r]=c&&"function"!=typeof m[r]?n[r]:p&&l?a(s,i):h&&m[r]==s?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(s):f&&"function"==typeof s?a(Function.call,s):s,f&&((v.virtual||(v.virtual={}))[r]=s,e&b.R&&g&&!g[r]&&w(g,r,s)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128;var k=b;k(k.S+k.F*!c,"Object",{defineProperty:m.f});var _=o.Object,x=function(e,t,n){return _.defineProperty(e,t,n)},S=t((function(e){e.exports={default:x,__esModule:!0}}));e(S);var E=e(t((function(e,t){t.__esModule=!0;var n,i=(n=S)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,i.default)(e,o.key,o)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()}))),L=t((function(e){!function(t){var n,i=Object.prototype,o=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag",u=t.regeneratorRuntime;if(u)e.exports=u;else{(u=t.regeneratorRuntime=e.exports).wrap=w;var c="suspendedStart",d="suspendedYield",f="executing",p="completed",h={},v={};v[a]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(P([])));m&&m!==i&&o.call(m,a)&&(v=m);var y=x.prototype=k.prototype=Object.create(v);_.prototype=y.constructor=x,x.constructor=_,x[s]=_.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(y),e},u.awrap=function(e){return{__await:e}},S(E.prototype),E.prototype[l]=function(){return this},u.AsyncIterator=E,u.async=function(e,t,n,i){var o=new E(w(e,t,n,i));return u.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(y),y[s]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=P,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,o){return l.type="throw",l.arg=e,t.next=i,o&&(t.method="next",t.arg=n),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:P(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),h}}}function w(e,t,n,i){var o=t&&t.prototype instanceof k?t:k,r=Object.create(o.prototype),a=new M(i||[]);return r._invoke=function(e,t,n){var i=c;return function(o,r){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===o)throw r;return j()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var l=L(a,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===c)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var s=b(e,t,n);if("normal"===s.type){if(i=n.done?p:d,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i=p,n.method="throw",n.arg=s.arg)}}}(e,n,a),r}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function k(){}function _(){}function x(){}function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function E(e){var t;this._invoke=function(n,i){function r(){return new Promise((function(t,r){!function t(n,i,r,a){var l=b(e[n],e,i);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&o.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,r,a)}),(function(e){t("throw",e,r,a)})):Promise.resolve(u).then((function(e){s.value=e,r(s)}),a)}a(l.arg)}(n,i,t,r)}))}return t=t?t.then(r,r):r()}}function L(e,t){var i=e.iterator[t.method];if(i===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,L(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=b(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,h):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(o.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())})),A=function(){return this}()||Function("return this")(),T=A.regeneratorRuntime&&Object.getOwnPropertyNames(A).indexOf("regeneratorRuntime")>=0,M=T&&A.regeneratorRuntime;A.regeneratorRuntime=void 0;var P=L;if(T)A.regeneratorRuntime=M;else try{delete A.regeneratorRuntime}catch(e){A.regeneratorRuntime=void 0}var j,F=P,O=Object.freeze({}),I=Math.ceil,C=Math.floor,q=function(e){return isNaN(e=+e)?0:(e>0?C:I)(e)},B=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},H=w,V={}.hasOwnProperty,R=function(e,t){return V.call(e,t)},N={},U={}.toString,D=function(e){return U.call(e).slice(8,-1)},z=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==D(e)?e.split(""):Object(e)},W=function(e){return z(B(e))},G=Math.min,K=function(e){return e>0?G(q(e),9007199254740991):0},J=Math.max,Y=Math.min,X=i["__core-js_shared__"]||(i["__core-js_shared__"]={}),Z=function(e){return X[e]||(X[e]={})},Q=0,$=Math.random(),ee=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++Q+$).toString(36))},te=Z("keys"),ne=function(e){return te[e]||(te[e]=ee(e))},ie=(j=!1,function(e,t,n){var i,o=W(e),r=K(o.length),a=function(e,t){return(e=q(e))<0?J(e+t,0):Y(e,t)}(n,r);if(j&&t!=t){for(;r>a;)if((i=o[a++])!=i)return!0}else for(;r>a;a++)if((j||a in o)&&o[a]===t)return j||a||0;return!j&&-1}),oe=ne("IE_PROTO"),re=function(e,t){var n,i=W(e),o=0,r=[];for(n in i)n!=oe&&R(i,n)&&r.push(n);for(;t.length>o;)R(i,n=t[o++])&&(~ie(r,n)||r.push(n));return r},ae="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),le=Object.keys||function(e){return re(e,ae)},se=c?Object.defineProperties:function(e,t){s(e);for(var n,i=le(t),o=i.length,r=0;o>r;)m.f(e,n=i[r++],t[n]);return e},ue=i.document,ce=ue&&ue.documentElement,de=ne("IE_PROTO"),fe=function(){},pe=function(){var e,t=p("iframe"),n=ae.length;for(t.style.display="none",ce.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),pe=e.F;n--;)delete pe.prototype[ae[n]];return pe()},he=Object.create||function(e,t){var n;return null!==e?(fe.prototype=s(e),n=new fe,fe.prototype=null,n[de]=e):n=pe(),void 0===t?n:se(n,t)},ve=t((function(e){var t=Z("wks"),n=i.Symbol,o="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=o&&n[e]||(o?n:ee)("Symbol."+e))}).store=t})),ge=m.f,me=ve("toStringTag"),ye=function(e,t,n){e&&!R(e=n?e:e.prototype,me)&&ge(e,me,{configurable:!0,value:t})},we={};w(we,ve("iterator"),(function(){return this}));var be,ke=function(e,t,n){e.prototype=he(we,{next:y(1,n)}),ye(e,t+" Iterator")},_e=function(e){return Object(B(e))},xe=ne("IE_PROTO"),Se=Object.prototype,Ee=Object.getPrototypeOf||function(e){return e=_e(e),R(e,xe)?e[xe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Se:null},Le=ve("iterator"),Ae=!([].keys&&"next"in[].keys()),Te=function(){return this},Me=function(e,t,n,i,o,r,a){ke(n,t,i);var l,s,u,c=function(e){if(!Ae&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},d=t+" Iterator",f="values"==o,p=!1,h=e.prototype,v=h[Le]||h["@@iterator"]||o&&h[o],g=!Ae&&v||c(o),m=o?f?c("entries"):g:void 0,y="Array"==t&&h.entries||v;if(y&&(u=Ee(y.call(new e)))!==Object.prototype&&u.next&&ye(u,d,!0),f&&v&&"values"!==v.name&&(p=!0,g=function(){return v.call(this)}),a&&(Ae||p||!h[Le])&&w(h,Le,g),N[t]=g,N[d]=Te,o)if(l={values:f?g:c("values"),keys:r?g:c("keys"),entries:m},a)for(s in l)s in h||H(h,s,l[s]);else k(k.P+k.F*(Ae||p),t,l);return l},Pe=(be=!0,function(e,t){var n,i,o=String(B(e)),r=q(t),a=o.length;return r<0||r>=a?be?"":void 0:(n=o.charCodeAt(r))<55296||n>56319||r+1===a||(i=o.charCodeAt(r+1))<56320||i>57343?be?o.charAt(r):n:be?o.slice(r,r+2):i-56320+(n-55296<<10)+65536});Me(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Pe(t,n),this._i+=e.length,{value:e,done:!1})}));var je=function(e,t){return{value:t,done:!!e}};Me(Array,"Array",(function(e,t){this._t=W(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,je(1)):je(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values");N.Arguments=N.Array;for(var Fe=ve("toStringTag"),Oe="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Ie=0;Ie<Oe.length;Ie++){var Ce=Oe[Ie],qe=i[Ce],Be=qe&&qe.prototype;Be&&!Be[Fe]&&w(Be,Fe,Ce),N[Ce]=N.Array}var He,Ve,Re,Ne=ve("toStringTag"),Ue="Arguments"==D(function(){return arguments}()),De=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Ne))?n:Ue?D(t):"Object"==(i=D(t))&&"function"==typeof t.callee?"Arguments":i},ze=function(e,t,n,i){try{return i?t(s(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&s(o.call(e)),t}},We=ve("iterator"),Ge=Array.prototype,Ke=function(e){return void 0!==e&&(N.Array===e||Ge[We]===e)},Je=ve("iterator"),Ye=o.getIteratorMethod=function(e){if(null!=e)return e[Je]||e["@@iterator"]||N[De(e)]},Xe=t((function(e){var t={},n={},i=e.exports=function(e,i,o,r,l){var u,c,d,f,p=l?function(){return e}:Ye(e),h=a(o,r,i?2:1),v=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(Ke(p)){for(u=K(e.length);u>v;v++)if((f=i?h(s(c=e[v])[0],c[1]):h(e[v]))===t||f===n)return f}else for(d=p.call(e);!(c=d.next()).done;)if((f=ze(d,h,c.value,i))===t||f===n)return f};i.BREAK=t,i.RETURN=n})),Ze=ve("species"),Qe=function(e,t){var n,i=s(e).constructor;return void 0===i||null==(n=s(i)[Ze])?t:r(n)},$e=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)},et=i.process,tt=i.setImmediate,nt=i.clearImmediate,it=i.MessageChannel,ot=i.Dispatch,rt=0,at={},lt=function(){var e=+this;if(at.hasOwnProperty(e)){var t=at[e];delete at[e],t()}},st=function(e){lt.call(e.data)};tt&&nt||(tt=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return at[++rt]=function(){$e("function"==typeof e?e:Function(e),t)},He(rt),rt},nt=function(e){delete at[e]},"process"==D(et)?He=function(e){et.nextTick(a(lt,e,1))}:ot&&ot.now?He=function(e){ot.now(a(lt,e,1))}:it?(Re=(Ve=new it).port2,Ve.port1.onmessage=st,He=a(Re.postMessage,Re,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts?(He=function(e){i.postMessage(e+"","*")},i.addEventListener("message",st,!1)):He="onreadystatechange"in p("script")?function(e){ce.appendChild(p("script")).onreadystatechange=function(){ce.removeChild(this),lt.call(e)}}:function(e){setTimeout(a(lt,e,1),0)});var ut={set:tt,clear:nt},ct=ut.set,dt=i.MutationObserver||i.WebKitMutationObserver,ft=i.process,pt=i.Promise,ht="process"==D(ft);function vt(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=r(t),this.reject=r(n)}var gt={f:function(e){return new vt(e)}},mt=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},yt=function(e,t){if(s(e),l(t)&&t.constructor===e)return t;var n=gt.f(e);return(0,n.resolve)(t),n.promise},wt=ve("species"),bt=ve("iterator"),kt=!1;try{var _t=[7][bt]();_t.return=function(){kt=!0},Array.from(_t,(function(){throw 2}))}catch(e){}var xt,St,Et,Lt,At,Tt,Mt,Pt=function(e,t){if(!t&&!kt)return!1;var n=!1;try{var i=[7],o=i[bt]();o.next=function(){return{done:n=!0}},i[bt]=function(){return o},e(i)}catch(e){}return n},jt=ut.set,Ft=function(){var e,t,n,o=function(){var i,o;for(ht&&(i=ft.domain)&&i.exit();e;){o=e.fn,e=e.next;try{o()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(ht)n=function(){ft.nextTick(o)};else if(!dt||i.navigator&&i.navigator.standalone)if(pt&&pt.resolve){var r=pt.resolve();n=function(){r.then(o)}}else n=function(){ct.call(i,o)};else{var a=!0,l=document.createTextNode("");new dt(o).observe(l,{characterData:!0}),n=function(){l.data=a=!a}}return function(i){var o={fn:i,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}(),Ot=i.TypeError,It=i.process,Ct=i.Promise,qt="process"==De(It),Bt=function(){},Ht=St=gt.f,Vt=!!function(){try{var e=Ct.resolve(1),t=(e.constructor={})[ve("species")]=function(e){e(Bt,Bt)};return(qt||"function"==typeof PromiseRejectionEvent)&&e.then(Bt)instanceof t}catch(e){}}(),Rt=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},Nt=function(e,t){if(!e._n){e._n=!0;var n=e._c;Ft((function(){for(var i=e._v,o=1==e._s,r=0,a=function(t){var n,r,a=o?t.ok:t.fail,l=t.resolve,s=t.reject,u=t.domain;try{a?(o||(2==e._h&&zt(e),e._h=1),!0===a?n=i:(u&&u.enter(),n=a(i),u&&u.exit()),n===t.promise?s(Ot("Promise-chain cycle")):(r=Rt(n))?r.call(n,l,s):l(n)):s(i)}catch(e){s(e)}};n.length>r;)a(n[r++]);e._c=[],e._n=!1,t&&!e._h&&Ut(e)}))}},Ut=function(e){jt.call(i,(function(){var t,n,o,r=e._v,a=Dt(e);if(a&&(t=mt((function(){qt?It.emit("unhandledRejection",r,e):(n=i.onunhandledrejection)?n({promise:e,reason:r}):(o=i.console)&&o.error&&o.error("Unhandled promise rejection",r)})),e._h=qt||Dt(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},Dt=function(e){return 1!==e._h&&0===(e._a||e._c).length},zt=function(e){jt.call(i,(function(){var t;qt?It.emit("rejectionHandled",e):(t=i.onrejectionhandled)&&t({promise:e,reason:e._v})}))},Wt=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Nt(t,!0))},Gt=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw Ot("Promise can't be resolved itself");(t=Rt(e))?Ft((function(){var i={_w:n,_d:!1};try{t.call(e,a(Gt,i,1),a(Wt,i,1))}catch(e){Wt.call(i,e)}})):(n._v=e,n._s=1,Nt(n,!1))}catch(e){Wt.call({_w:n,_d:!1},e)}}};Vt||(Ct=function(e){!function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!")}(this,Ct,"Promise","_h"),r(e),xt.call(this);try{e(a(Gt,this,1),a(Wt,this,1))}catch(e){Wt.call(this,e)}},(xt=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:w(e,i,t[i]);return e}(Ct.prototype,{then:function(e,t){var n=Ht(Qe(this,Ct));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=qt?It.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Nt(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Et=function(){var e=new xt;this.promise=e,this.resolve=a(Gt,e,1),this.reject=a(Wt,e,1)},gt.f=Ht=function(e){return e===Ct||e===Lt?new Et(e):St(e)}),k(k.G+k.W+k.F*!Vt,{Promise:Ct}),ye(Ct,"Promise"),Tt="function"==typeof o[At="Promise"]?o[At]:i[At],c&&Tt&&!Tt[wt]&&m.f(Tt,wt,{configurable:!0,get:function(){return this}}),Lt=o.Promise,k(k.S+k.F*!Vt,"Promise",{reject:function(e){var t=Ht(this);return(0,t.reject)(e),t.promise}}),k(k.S+!0*k.F,"Promise",{resolve:function(e){return yt(this===Lt?Ct:this,e)}}),k(k.S+k.F*!(Vt&&Pt((function(e){Ct.all(e).catch(Bt)}))),"Promise",{all:function(e){var t=this,n=Ht(t),i=n.resolve,o=n.reject,r=mt((function(){var n=[],r=0,a=1;Xe(e,!1,(function(e){var l=r++,s=!1;n.push(void 0),a++,t.resolve(e).then((function(e){s||(s=!0,n[l]=e,--a||i(n))}),o)})),--a||i(n)}));return r.e&&o(r.v),n.promise},race:function(e){var t=this,n=Ht(t),i=n.reject,o=mt((function(){Xe(e,!1,(function(e){t.resolve(e).then(n.resolve,i)}))}));return o.e&&i(o.v),n.promise}}),k(k.P+k.R,"Promise",{finally:function(e){var t=Qe(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return yt(t,e()).then((function(){return n}))}:e,n?function(n){return yt(t,e()).then((function(){throw n}))}:e)}}),k(k.S,"Promise",{try:function(e){var t=gt.f(this),n=mt(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}}),(Mt=O)&&Mt.default;var Kt=o.Promise,Jt=t((function(e){e.exports={default:Kt,__esModule:!0}})),Yt=e(Jt),Xt=e(t((function(e,t){t.__esModule=!0;var n,i=(n=Jt)&&n.__esModule?n:{default:n};t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default((function(e,n){return function o(r,a){try{var l=t[r](a),s=l.value}catch(e){return void n(e)}if(!l.done)return i.default.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}}))),Zt=o.JSON||(o.JSON={stringify:JSON.stringify}),Qt=function(e){return Zt.stringify.apply(Zt,arguments)},$t=e(t((function(e){e.exports={default:Qt,__esModule:!0}}))),en={f:ve},tn=en.f("iterator"),nn=t((function(e){e.exports={default:tn,__esModule:!0}}));e(nn);var on=t((function(e){var t=ee("meta"),n=m.f,i=0,o=Object.isExtensible||function(){return!0},r=!u((function(){return o(Object.preventExtensions({}))})),a=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!R(e,t)){if(!o(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!R(e,t)){if(!o(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return r&&s.NEED&&o(e)&&!R(e,t)&&a(e),e}}})),rn=(on.KEY,on.NEED,on.fastKey,on.getWeak,on.onFreeze,m.f),an=function(e){var t=o.Symbol||(o.Symbol={});"_"==e.charAt(0)||e in t||rn(t,e,{value:en.f(e)})},ln={f:Object.getOwnPropertySymbols},sn={f:{}.propertyIsEnumerable},un=Array.isArray||function(e){return"Array"==D(e)},cn=ae.concat("length","prototype"),dn={f:Object.getOwnPropertyNames||function(e){return re(e,cn)}},fn=dn.f,pn={}.toString,hn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],vn={f:function(e){return hn&&"[object Window]"==pn.call(e)?function(e){try{return fn(e)}catch(e){return hn.slice()}}(e):fn(W(e))}},gn=Object.getOwnPropertyDescriptor,mn={f:c?gn:function(e,t){if(e=W(e),t=v(t,!0),h)try{return gn(e,t)}catch(e){}if(R(e,t))return y(!sn.f.call(e,t),e[t])}},yn=on.KEY,wn=mn.f,bn=m.f,kn=vn.f,_n=i.Symbol,xn=i.JSON,Sn=xn&&xn.stringify,En=ve("_hidden"),Ln=ve("toPrimitive"),An={}.propertyIsEnumerable,Tn=Z("symbol-registry"),Mn=Z("symbols"),Pn=Z("op-symbols"),jn=Object.prototype,Fn="function"==typeof _n,On=i.QObject,In=!On||!On.prototype||!On.prototype.findChild,Cn=c&&u((function(){return 7!=he(bn({},"a",{get:function(){return bn(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=wn(jn,t);i&&delete jn[t],bn(e,t,n),i&&e!==jn&&bn(jn,t,i)}:bn,qn=function(e){var t=Mn[e]=he(_n.prototype);return t._k=e,t},Bn=Fn&&"symbol"==typeof _n.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof _n},Hn=function(e,t,n){return e===jn&&Hn(Pn,t,n),s(e),t=v(t,!0),s(n),R(Mn,t)?(n.enumerable?(R(e,En)&&e[En][t]&&(e[En][t]=!1),n=he(n,{enumerable:y(0,!1)})):(R(e,En)||bn(e,En,y(1,{})),e[En][t]=!0),Cn(e,t,n)):bn(e,t,n)},Vn=function(e,t){s(e);for(var n,i=function(e){var t=le(e),n=ln.f;if(n)for(var i,o=n(e),r=sn.f,a=0;o.length>a;)r.call(e,i=o[a++])&&t.push(i);return t}(t=W(t)),o=0,r=i.length;r>o;)Hn(e,n=i[o++],t[n]);return e},Rn=function(e){var t=An.call(this,e=v(e,!0));return!(this===jn&&R(Mn,e)&&!R(Pn,e))&&(!(t||!R(this,e)||!R(Mn,e)||R(this,En)&&this[En][e])||t)},Nn=function(e,t){if(e=W(e),t=v(t,!0),e!==jn||!R(Mn,t)||R(Pn,t)){var n=wn(e,t);return!n||!R(Mn,t)||R(e,En)&&e[En][t]||(n.enumerable=!0),n}},Un=function(e){for(var t,n=kn(W(e)),i=[],o=0;n.length>o;)R(Mn,t=n[o++])||t==En||t==yn||i.push(t);return i},Dn=function(e){for(var t,n=e===jn,i=kn(n?Pn:W(e)),o=[],r=0;i.length>r;)!R(Mn,t=i[r++])||n&&!R(jn,t)||o.push(Mn[t]);return o};Fn||(H((_n=function(){if(this instanceof _n)throw TypeError("Symbol is not a constructor!");var e=ee(arguments.length>0?arguments[0]:void 0),t=function(n){this===jn&&t.call(Pn,n),R(this,En)&&R(this[En],e)&&(this[En][e]=!1),Cn(this,e,y(1,n))};return c&&In&&Cn(jn,e,{configurable:!0,set:t}),qn(e)}).prototype,"toString",(function(){return this._k})),mn.f=Nn,m.f=Hn,dn.f=vn.f=Un,sn.f=Rn,ln.f=Dn,en.f=function(e){return qn(ve(e))}),k(k.G+k.W+k.F*!Fn,{Symbol:_n});for(var zn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Wn=0;zn.length>Wn;)ve(zn[Wn++]);for(var Gn=le(ve.store),Kn=0;Gn.length>Kn;)an(Gn[Kn++]);k(k.S+k.F*!Fn,"Symbol",{for:function(e){return R(Tn,e+="")?Tn[e]:Tn[e]=_n(e)},keyFor:function(e){if(!Bn(e))throw TypeError(e+" is not a symbol!");for(var t in Tn)if(Tn[t]===e)return t},useSetter:function(){In=!0},useSimple:function(){In=!1}}),k(k.S+k.F*!Fn,"Object",{create:function(e,t){return void 0===t?he(e):Vn(he(e),t)},defineProperty:Hn,defineProperties:Vn,getOwnPropertyDescriptor:Nn,getOwnPropertyNames:Un,getOwnPropertySymbols:Dn}),xn&&k(k.S+k.F*(!Fn||u((function(){var e=_n();return"[null]"!=Sn([e])||"{}"!=Sn({a:e})||"{}"!=Sn(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t=i[1],(l(t)||void 0!==e)&&!Bn(e))return un(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Bn(t))return t}),i[1]=t,Sn.apply(xn,i)}}),_n.prototype[Ln]||w(_n.prototype,Ln,_n.prototype.valueOf),ye(_n,"Symbol"),ye(Math,"Math",!0),ye(i.JSON,"JSON",!0),an("asyncIterator"),an("observable");var Jn=o.Symbol,Yn=t((function(e){e.exports={default:Jn,__esModule:!0}}));e(Yn);var Xn=e(t((function(e,t){t.__esModule=!0;var n=r(nn),i=r(Yn),o="function"==typeof i.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function r(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(n.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}})));!function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),k(k.S+k.F*u((function(){n(1)})),"Object",i)}("keys",(function(){return function(e){return le(_e(e))}}));var Zn=o.Object.keys,Qn=e(t((function(e){e.exports={default:Zn,__esModule:!0}})));function $n(e,t,n){return new Yt((function(i,o){var r=new XMLHttpRequest;"GET"===e&&n&&Qn(n).forEach((function(e){var i=t.includes("?")?"&":"?";t+=""+i+e+"="+n[e]}));(r.withCredentials=!0,r.open(e,t,!0),r.onload=function(){4===r.readyState&&200===r.status&&""!==r.response?i(JSON.parse(r.response)):o(r)},r.onerror=function(){o(r)},n&&n.headers)&&Qn(n.headers).forEach((function(e){r.setRequestHeader(e,n.headers[e])}));n="object"===(void 0===n?"undefined":Xn(n))?$t(n):n,r.send(n)}))}var ei="3457",ti="3607",ni="1829",ii="3477",oi="3567",ri="3467",ai="3422",li="3197",si="3367",ui="3362";function ci(){var e=function(e){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split("; ").shift();return""}("pixtag");return e?"&pixtag="+e:""}function di(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function fi(e){var t=e.adPosition,n=void 0===t?"":t,i=e.mergePosition,o=void 0===i?"":i,r=e.demoAdNo,a=void 0===r?function(e){if(!e)return"";var t,n,i=window.location.search.substring(1).split("&");for(t=0;t<i.length;t++)if((n=i[t].split("="))[0]===e)return decodeURIComponent(n[1]);return""}("demo_ad_no"):r,l=e.adLimit,s=void 0===l?1:l,u=e.width,c=void 0===u?0:u,d=e.height,f=void 0===d?0:d,p=!!window.pix.isMobile,h=document.body.dataset.blogSiteCategoryId,v="",g=location.protocol+"//"+window.pix.falconsite+"/ad/json?version=2&ad_limit="+s;if(p)v=document.body.dataset.articleSiteCategoryId;else{var m=document.querySelector("#article-box .title");v=m?m.dataset.siteCategoryId:""}n&&(g+=n.split(",").map((function(e,t){var n=o&&o.split(",")[t];return"&pos[]="+e+","+c+","+f+(n?"&merge_position["+e+"]="+n:"")})).join(""));return ci()&&(g+=ci()),a&&(g+="&demo_ad_no="+a),document.referrer&&(g+="&referrer="+encodeURI(document.referrer)),v&&(g+="&article_category="+encodeURI(v)),h&&(g+="&blog_category="+encodeURI(h)),g}function pi(e){var t=new RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}var hi=pi("demo_ad_no"),vi=pi("ad_num"),gi=pi("preview_mib_fly_desktop_image_ad"),mi="block"===document.body.dataset.adsenseState,yi="adult"===document.body.dataset.adsenseClassification,wi=xi(),bi=!!window.pix.isMobile,ki=Si(),_i=pix.MIB.config.hasMIB;function xi(){return!(!hi||![li,ei,ti,ni,ii,ri,oi,ai,si,ui].includes(vi))||!(!gi||"10"!==gi)}function Si(){return pix.MIB.config.availablePositions.filter((function(e){var t=bi?"fly-mobile-image":"fly-desktop-image";return e.name===t}))[0].enable}function Ei(){return"10"===gi?ii:wi?vi:yi?ni:mi?bi?ti:ei:!ki&&_i?bi?ai:oi:bi?ri:ii}var Li=function(){function e(t){n(this,e),this.ad=t}return E(e,[{key:"creatVideo",value:function(){this.player=document.querySelector("#ad-player"),this.player.src=this.ad.videofileMp4,new window.pixAdVideo({video:this.player,videoCallbackUrl:this.ad.videoCallbackUrl,videoClickUrl:"",clickUrl:this.ad.clickUrl,controlBarHeight:45,controlBarBackground:"none"}).create()}},{key:"renderVideo",value:function(){var e=this;if("video"===this.ad.type)if(window.pixAdVideo)this.creatVideo();else{var t=document.createElement("script");t.onload=function(){e.creatVideo()},t.src="https://falcon-asset.pixfs.net.work/js/adVideo.min.js",document.head.appendChild(t)}}}]),e}(),Ai=ve("iterator"),Ti=o.isIterable=function(e){var t=Object(e);return void 0!==t[Ai]||"@@iterator"in t||N.hasOwnProperty(De(t))},Mi=t((function(e){e.exports={default:Ti,__esModule:!0}}));e(Mi);var Pi=o.getIterator=function(e){var t=Ye(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return s(t.call(e))},ji=t((function(e){e.exports={default:Pi,__esModule:!0}}));e(ji);var Fi=e(t((function(e,t){t.__esModule=!0;var n=o(Mi),i=o(ji);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var l,s=(0,i.default)(e);!(o=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}))),Oi=function(){function e(t){n(this,e),this.emmaUrl="https://emma.pixnet.cc/",this.owner=window.pix&&window.pix.owner,this.utm="utm_source=PIXNET&utm_medium=popup_ad",this.ad=t,this.track=t.track,this.isLogin=!!window.pix.member_token}var t,i,o;return E(e,[{key:"getElements",value:function(){this.functionWrapper=this.ad.root.querySelector(".ad-full-page__function"),this.profileName=this.functionWrapper.querySelector(".author-profile__name"),this.blogName=this.functionWrapper.querySelector(".author-profile__info"),this.tagsWrapper=this.functionWrapper.querySelector(".tags-wrapper"),this.followButton=this.functionWrapper.querySelector(".subscribe-btn"),this.avatar=this.functionWrapper.querySelector(".author-profile__avatar"),this.profileLink=this.functionWrapper.querySelector(".author-profile__link")}},{key:"getTemplate",value:function(){return'\n        <div class="ad-full-page__function">\n            <div class="ad-full-page__function-inner">\n                <div class="author-profile">\n                    <a class="author-profile__link">\n                        <img class="author-profile__avatar" src="https://s1.pimg.tw/avatar/falcondemo/0/0/resize/80x0.png?v=" alt="創作者的頭像">\n                    </a>\n                    <div class="author-profile__content">\n                        <a class="author-profile__name"></a>\n                        <a data-follow-state="關注" class="subscribe-btn"></a>\n                        <p class="author-profile__info"></p>\n                    </div>\n                </div>\n\n                <div class="tags-wrapper">\n                    <div class="new-tags">\n                        <span class="tag-cate">文章標籤</span>\n                        <div class="tags"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        '}},{key:"getFunctionInfo",value:(o=Xt(F.mark((function e(){var t,n,i,o,r;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt.all([this.getUserInfo(),this.getBlogInfo(),this.getArticleInfo()]);case 2:t=e.sent,n=Fi(t,3),i=n[0],o=n[1],r=n[2],this.renderUserInfo(i),this.renderBlogInfo(o),this.renderArticleInfo(r),this.renderFollowStatus(),this.track.authorIntroImpression(),this.ad.isMobile&&this.ad.addMIBWording(this.ad.root.classList.contains("ad-full-page--hidden-tags")?".ad-box":".tags-wrapper");case 13:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"renderUserInfo",value:function(e){var t=this,n="https://www.pixnet.net/pcard/"+e.user.name+"?"+this.utm,i=e.user.display_name;this.profileName.innerHTML=i,this.avatar.src=e.user.avatar,this.avatar.alt="創作者 "+i+" 的頭像",this.profileLink.href=n,this.profileName.href=n,this.avatar.addEventListener("click",(function(){t.track.authorIntroIconClickEvent()})),this.profileName.addEventListener("click",(function(){t.track.profileNameClickEvent()}))}},{key:"renderBlogInfo",value:function(e){this.blogName.innerHTML=e.blog.name}},{key:"renderArticleInfo",value:function(e){var t=this,n=this.tagsWrapper.querySelector(".new-tags"),i=e.article?e.article.tags:[],o=null;if(i.length){var r=i.map((function(e){return'<a class="tag" href="https://www.pixnet.net/tags/'+di(e.tag)+"?"+t.utm+'"\n                    target="_blank" rel="noopener">'+di(e.tag)+"</a>"})).join("");n.querySelector(".tags").innerHTML=r,"js"===this.ad.type&&this.ad.root.classList.add("ad-full-page--with-tags"),o=n.querySelectorAll(".tag"),this.track.articleTagImpression(o)}else this.ad.root.classList.add("ad-full-page--hidden-tags"),"js"===this.ad.type&&this.ad.isMobile&&(this.ad.root.querySelector(".ad-box").style.height=window.innerHeight-80+"px")}},{key:"renderFollowStatus",value:(i=Xt(F.mark((function e(){var t=this;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLogin){e.next=3;break}return this.changeFollowBtnToLoginUrl(),e.abrupt("return");case 3:if(!window.pix.is_owner){e.next=6;break}return this.followButton.style.display="none",e.abrupt("return");case 6:return e.next=8,this.getFollowStatus();case 8:"follow"===e.sent.data.follow_state&&(this.followButton.classList.add("following"),this.followButton.dataset.followState="已關注"),this.followButton.addEventListener("click",(function(e){t.updateFollowState()}));case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"updateFollowState",value:(t=Xt(F.mark((function e(){var t,n;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,$n("POST","/api/blog/followstatus");case 3:t=e.sent,(n="follow"===t.data.action)?(this.followButton.classList.add("following"),this.followButton.dataset.followState="已關注",this.track.followAuthorSuccessfully()):(this.followButton.classList.remove("following"),this.followButton.dataset.followState="關注"),this.track.clickFollowButtonEvent(n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeFollowBtnToLoginUrl",value:function(){var e=this,t=window.pix.domain_append,n=t?"http:":"https:",i=n+"//classic-panel.pixnet.cc"+t+"/login/openid?openid="+n+"//member.pixnet.cc"+t+"/login&easy_login=1&done="+encodeURIComponent(location.href+(location.search?"&":"?")+this.utm);this.followButton.addEventListener("click",(function(t){e.track.clickFollowButtonEvent(!0)})),this.followButton.href=i}},{key:"getUserInfo",value:function(){var e=(new Date).getTime();return $n("GET",this.emmaUrl+"users/"+this.owner,{cb:e})}},{key:"getBlogInfo",value:function(){var e=(new Date).getTime();return $n("GET",this.emmaUrl+"blog",{user:this.owner,cb:e})}},{key:"getArticleInfo",value:function(){var e=(new Date).getTime(),t=document.querySelector("body").dataset.articleId||"";return $n("GET",this.emmaUrl+"blog/articles/"+t,{user:this.owner,cb:e})}},{key:"getFollowStatus",value:function(){return $n("GET","/api/blog/followstatus")}},{key:"render",value:function(){this.ad.root.insertAdjacentHTML("afterbegin",this.getTemplate()),this.getElements(),this.getFunctionInfo()}}]),e}(),Ii=[],Ci=null,qi="";function Bi(){clearInterval(Ci)}function Hi(e){Ii[e]||((new Image).src=qi+"&t="+e,Ii[e]=!0)}function Vi(e){e&&(location.href=e)}var Ri=function(e,t,n){t in e?m.f(e,t,y(0,n)):e[t]=n};k(k.S+k.F*!Pt((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,o,r=_e(e),l="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,c=void 0!==u,d=0,f=Ye(r);if(c&&(u=a(u,s>2?arguments[2]:void 0,2)),null==f||l==Array&&Ke(f))for(n=new l(t=K(r.length));t>d;d++)Ri(n,d,c?u(r[d],d):r[d]);else for(o=f.call(r),n=new l;!(i=o.next()).done;d++)Ri(n,d,c?ze(o,u,[i.value,d],!0):i.value);return n.length=d,n}});var Ni=o.Array.from,Ui=t((function(e){e.exports={default:Ni,__esModule:!0}}));e(Ui);var Di=e(t((function(e,t){t.__esModule=!0;var n,i=(n=Ui)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}}))),zi=function(){function e(t){n(this,e),this.isMobile=t.isMobile,this.redirectHref=t.redirectHref,this.adHashId=t.adHashId,this.trackAdType=this.redirectHref?"between_pages":"switch_tabs",this.device=this.isMobile?"mobile":"desktop",this.authorUniqId=document.body.dataset.authorMemberUniqid}return E(e,[{key:"trackEvent",value:function(e){e.eventNonInteraction||(e.eventNonInteraction=0),window.dataLayer=window.dataLayer||[],dataLayer.push(e),_piq.push(["trackEvent",e.eventCategory,e.eventAction,e.eventLabel,e.eventValue])}},{key:"exitPageEvent",value:function(){var e="exit_page_"+this.trackAdType+"_"+this.device;this.trackEvent({event:"popad",eventCategory:"popup_ad",eventAction:e,eventLabel:this.adHashId,eventValue:""})}},{key:"escapeKeyDownEvent",value:function(){this.trackEvent({event:"popad",eventCategory:"popup_ad",eventAction:"press_keyboard_esc_"+this.trackAdType+"_desktop",eventLabel:this.adHashId,eventValue:""})}},{key:"clickOnEdgeEvent",value:function(){this.trackEvent({event:"popad",eventCategory:"popup_ad",eventAction:"click_on_edge_"+this.trackAdType+"_desktop",eventLabel:this.adHashId,eventValue:""})}},{key:"clickCloseButtonEvent",value:function(){var e=(this.redirectHref?"click_on_goto_link_button_":"click_on_close_button_")+"_"+this.trackAdType+"_"+this.device;this.trackEvent({event:"popad",eventCategory:"popup_ad",eventAction:e,eventLabel:this.adHashId,eventValue:""})}},{key:"authorIntroImpression",value:function(){this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"imps_author_intro",eventLabel:"",eventValue:""})}},{key:"authorIntroIconClickEvent",value:function(){this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"click_author_intro_author_icon",eventLabel:this.authorUniqId,eventValue:""})}},{key:"profileNameClickEvent",value:function(){this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"click_author_intro_author_name",eventLabel:this.authorUniqId,eventValue:""})}},{key:"articleTagImpression",value:function(e){var t=this.isMobile?80:45;this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"imps_article_tag",eventLabel:"",eventValue:function(e,t){return[].concat(Di(e)).filter((function(e){return function(e,t){return e.offsetTop<t}(e,t)})).length}(e,t)})}},{key:"followAuthorSuccessfully",value:function(){this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"follow_author_successfully",eventLabel:this.authorUniqId,eventValue:""})}},{key:"clickFollowButtonEvent",value:function(e){var t=e?"follow":"unfollow";this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"click_author_intro_"+t+"_button",eventLabel:this.authorUniqId,eventValue:""})}}]),e}();function Wi(e){if("SCRIPT"===e.tagName)return e.parentNode.replaceChild(function(e){var t=document.createElement("script");t.text=e.innerHTML;for(var n=e.attributes.length-1;n>=0;n--)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}(e),e),e;for(var t=0,n=e.childNodes;t<n.length;)Wi(n[t++]);return e}var Gi=function(){function e(t){n(this,e),this.startTime=null,this.duration=0,this.viewAbilityDuration=0,this.stopRecord=!1,this.timer="",this.ad=t,this.listenBrowserTabChange=this.listenBrowserTabChange.bind(this),this.domSubtreeModifiedEvent=this.domSubtreeModifiedEvent.bind(this),this.countDownStart=this.countDownStart.bind(this)}return E(e,[{key:"checkAdLoaded",value:function(){var e=this,t=this.ad.root.querySelector(".ad-box");if("image"!==this.ad.type&&"html5"!==this.ad.type||t.querySelector("img, iframe").addEventListener("load",(function(){e.checkViewAbility()}),!0),"video"===this.ad.type&&this.ad.root.querySelector("video").addEventListener("loadedmetadata",(function(){e.checkViewAbility()})),"js"===this.ad.type){var n=t.querySelector("img, iframe");if(n)return void this.listenAdShow(n);t.addEventListener("DOMSubtreeModified",this.domSubtreeModifiedEvent)}}},{key:"domSubtreeModifiedEvent",value:function(){var e=this.ad.root.querySelector(".ad-box"),t=e.querySelector("img, iframe");t&&(this.listenAdShow(t),e.removeEventListener("DOMSubtreeModified",this.domSubtreeModifiedEvent,!1))}},{key:"stop",value:function(){this.stopRecord=!0,this.stopActiveViewRecord()}},{key:"listenAdShow",value:function(e){var t=this;e.addEventListener("load",(function(){t.checkViewAbility()}),!0)}},{key:"stopActiveViewRecord",value:function(){window.cancelAnimFrame(this.timer),document.removeEventListener("visibilitychange",this.listenBrowserTabChange,!1)}},{key:"checkViewAbility",value:function(){this.timer=window.requestAnimFrame(this.countDownStart),this.viewAbilityDuration="video"===this.ad.type?2e3:1e3,document.addEventListener("visibilitychange",this.listenBrowserTabChange)}},{key:"listenBrowserTabChange",value:function(){document.hidden?(window.cancelAnimFrame(this.timer),this.duration=this.getTime()-this.startTime,this.startTime=null):window.requestAnimFrame(this.countDownStart)}},{key:"countDownStart",value:function(){this.startTime=this.startTime||this.getTime(),this.getTime()-this.startTime+this.duration>=this.viewAbilityDuration?(this.stopActiveViewRecord(),this.record()):this.stopRecord||window.requestAnimFrame(this.countDownStart)}},{key:"getTime",value:function(){return"object"===Xn(window.performance)?window.performance.now():(new Date).getTime()}},{key:"record",value:function(){(new Image).src=this.ad.activeViewUrl}}]),e}();function Ki(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}Ki("html.show-safari-bottom_menu{height:100%}html.show-safari-bottom_menu body{position:fixed}#ad-full-page.mobile{position:fixed;top:0;right:0;bottom:0;left:0;z-index:100000006;box-sizing:border-box;margin:auto;background-color:rgba(0,0,0,.85);-webkit-transform:translateY(100vh);transform:translateY(100vh);will-change:transform}#ad-full-page.mobile.active{-webkit-transform:translateY(0);transform:translateY(0);-webkit-transition:-webkit-transform 1s;transition:-webkit-transform 1s;transition:transform 1s;transition:transform 1s,-webkit-transform 1s}#ad-full-page.mobile.ad-full-page--hidden-tags .tags-wrapper{display:none}#ad-full-page.mobile .wrapper{position:absolute;top:80px;overflow:scroll;width:100vw;-webkit-overflow-scrolling:touch}#ad-full-page.mobile .wrapper .ad-box,#ad-full-page.mobile .wrapper .ad-content,#ad-full-page.mobile .wrapper .ad-full-page-link,#ad-full-page.mobile .wrapper .back-pane{height:100%}#ad-full-page.mobile.ad-full-page--with-tags .wrapper{top:160px}#ad-full-page.mobile .ad-box{text-align:center}#ad-full-page.mobile .ad-box img{-o-object-fit:contain;object-fit:contain}#ad-full-page.mobile .ad-box .ad-full-page-video,#ad-full-page.mobile .ad-box img{width:100%}#ad-full-page.mobile .ad-box .ad-full-page-video{margin:0 auto;max-width:100%}#ad-full-page.mobile .ad-full-page--js .ad-box{width:100%}#ad-full-page.mobile .ad-full-page--js iframe{position:relative;top:2px}#ad-full-page.mobile .ad-full-page--nojs iframe{width:100%}#ad-full-page.mobile .ad-full-page__background iframe{display:block;width:100%}#ad-full-page.mobile .ad-full-page__background .video-container{width:100%}#ad-full-page.mobile .ad-full-page__background .video-wrapper{position:relative;overflow:hidden;width:100%;height:0;padding-bottom:56.25%}#ad-full-page.mobile .ad-full-page__background .ad-full-page-video{position:absolute;top:0;left:0;width:100%;height:100%!important}#ad-full-page.mobile .ad-full-page__background .back-pane-up{height:180px}#ad-full-page.mobile .ad-full-page__background .back-pane-down{position:relative;height:145px}#ad-full-page.mobile .ad-full-page__mobile-close-btn{position:fixed;top:0;left:50%;z-index:2147483647;border:none;padding:3px 6px;font-size:19px;letter-spacing:2.2px;color:#fff;background-color:rgba(0,0,0,.5);border-radius:6px;visibility:hidden;-webkit-transform:translate(-50%);transform:translate(-50%)}#ad-full-page.mobile .ad-full-page__function{background-color:#fff}#ad-full-page.mobile .ad-full-page__function *{box-sizing:border-box}#ad-full-page.mobile .ad-full-page__function .ad-full-page__function-inner{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1;flex-wrap:wrap;margin:0 auto}#ad-full-page.mobile .ad-full-page__function .author-profile{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;width:100%;height:80px;padding:10px 15px;border-bottom:1px solid #cfcfcf}#ad-full-page.mobile .ad-full-page__function .author-profile__avatar{width:48px;border-radius:50%}#ad-full-page.mobile .ad-full-page__function .author-profile__content{padding-left:16px;padding-right:0;width:100%}#ad-full-page.mobile .ad-full-page__function .author-profile__name{position:relative;top:5px;font-size:16px;letter-spacing:1.3px;color:#000}#ad-full-page.mobile .ad-full-page__function .author-profile__name:hover{color:#000}#ad-full-page.mobile .ad-full-page__function .author-profile__info{overflow:hidden;margin-top:15px;height:20px;font-size:14px;letter-spacing:1px;text-overflow:ellipsis;white-space:nowrap;max-width:300px}#ad-full-page.mobile .ad-full-page__function .subscribe-btn{float:right;display:inline-block;margin-left:16px}#ad-full-page.mobile .ad-full-page__function .tags-wrapper{position:absolute;top:80px;z-index:1;overflow:hidden;width:100%;padding:10px;max-height:80px;min-height:80px;background-color:#fff}#ad-full-page.mobile .ad-full-page__function .tags-wrapper .new-tags{overflow:hidden;border:none;padding:0}#ad-full-page.mobile .ad-full-page__function .tags-wrapper .tag-cate{display:none}#ad-full-page.mobile .ad-full-page__function .tags-wrapper .tag{margin:4px 2px;border-radius:6px}#ad-full-page.mobile .ad-full-page__function .tags-wrapper .tag:before{left:0}#ad-full-page.mobile .hide{display:none}"),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var Ji=function(){function e(t){var i=this;n(this,e),this.readingPosition=0,this.isMobile=!0,this.redirectHref=t,this.track=null,this.activeViewRecord=null,window.pix.adFullPage.redirectToClickLocation=function(){Vi(i.redirectHref)},this.exitPageEvent=this.exitPageEvent.bind(this)}var t;return E(e,[{key:"setConfig",value:function(e){var t=e.ad_slots[0],n=t&&t.ad_list[0],i=n.file,o=n.file2,r=n.click_url,a=n.type,l=n.hashid,s=n.file_content,u=n.file_mime_type,c=n.videofile_mp4,d=n.videofile_webm,f=n.video_callback_url,p=n.activeview_url;this.slot=t,this.data=n,this.clickUrl=r,this.type=a,this.hashid=l,this.fileContent=s,this.fileMimeType=u,this.videofileMp4=c,this.videofileWebm=d,this.videoCallbackUrl=f,this.activeViewUrl=p,this.file=this.formatFile(a,i),this.file2=this.formatFile(a,o)}},{key:"getAd",value:function(){var e,t;return $n("GET",(e=Ei(),t=void 0,e===ri&&(t=ui),fi({adPosition:e,mergePosition:t,demoAdNo:"10"===hi?"16b5d40cc4499ee92eab6f42ceb83895":hi})))}},{key:"addMIBWording",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".ad-box";if(Si()){var t='<span class="mib--ad-box__icon"><a href="#">痞客邦廣告聯播網</a></span>';this.root.querySelector(e).insertAdjacentHTML("beforeend",t)}}},{key:"getElements",value:function(){this.root=document.getElementById("ad-full-page"),this.video=this.root.querySelector(".ad-full-page-video"),this.link=this.root.querySelector(".ad-full-page-link"),this.closeButton=this.root.querySelector(".ad-full-page__mobile-close-btn"),this.loadingIcon=this.root.querySelector(".loading-icon")}},{key:"backPaneTemplate",value:function(){return"video"===this.type?'<iframe class="ad-full-page-iframe" src="'+this.file+'" frameborder="0"></iframe>':'\n        <a href="'+this.clickUrl+'" target="_blank" rel="noopener" >\n            <img src="'+this.file+'" alt="'+this.file+'"/>\n        </a>\n        '}},{key:"getVideoTemplate",value:function(){return'\n        <div class="ad-full-page-link">\n            <div class="back-pane">\n                <iframe class="back-pane-up" src="'+this.file+'" frameborder="0"></iframe>\n                <div class="video-container">\n                    <div class="video-wrapper">\n                        <video id="ad-player" class="ad-full-page-video" autoplay loop muted playsinline>\n                        </video>\n                    </div>\n                </div>\n                <iframe class="back-pane-down" src="'+this.file2+'" frameborder="0"></iframe>\n            </div>\n        </div>\n        '}},{key:"getHtmlAndJsTemplate",value:function(){return this.slot.html}},{key:"getImageTemplate",value:function(){return'\n        <div class="ad-full-page-link">\n            <div class="back-pane">\n                <a href="'+this.clickUrl+'" target="_blank" rel="noopener" >\n                    <img src="'+this.file+'" alt="'+this.file+'"/>\n                </a>\n            </div>\n        </div>\n        '}},{key:"getAdTemplateByType",value:function(){var e="";switch(this.type){case"image":e=this.getImageTemplate();break;case"video":e=this.getVideoTemplate();break;case"html5":case"js":e=this.getHtmlAndJsTemplate()}return e}},{key:"formatFile",value:function(e,t){return-1===t.indexOf("clickTAG")&&"video"===e&&(t+="&clickTAG="+encodeURIComponent(this.clickUrl)),"image"===e&&this.fileContent&&this.fileMimeType&&(t="data:"+this.fileMimeType+";base64,"+this.fileContent),t}},{key:"getTemplate",value:function(){return'\n            <div id="ad-full-page" class="mobile">\n            <div class="wrapper">\n                <div class="ad-content">\n                    <div class="loading-icon"></div>\n                    <div class="ad-box">\n                        '+this.getAdTemplateByType()+'\n                    </div>\n                </div>\n                <button class="ad-full-page__mobile-close-btn">\n                    關閉視窗\n                    <svg style="vertical-align: middle" width="20px" height="20px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="文字按鈕" transform="translate(-255.000000, -107.000000)" fill="#FFFFFF"> <g id="4" transform="translate(248.000000, 100.000000)"> <path d="M13.65,13.65 L6,13.65 L6,16.35 L13.65,16.35 L13.65,24 L16.35,24 L16.35,16.35 L24,16.35 L24,13.65 L16.35,13.65 L16.35,6 L13.65,6 L13.65,13.65 Z" id="Combined-Shape" transform="translate(15.000000, 15.000000) rotate(-315.000000) translate(-15.000000, -15.000000) "></path> </g> </g> </g> </svg>\n                </button>\n            </div>\n        </div>\n        '}},{key:"updateAdHeight",value:function(){var e=this,t=0;function n(e,t,n,i){"image"===e&&(n.querySelector(".back-pane img").style.height=t-80+"px"),"js"===e&&(n.querySelector(".ad-box").style.height=t-160+"px"),"html5"===e&&(n.querySelector("iframe").style.height=t-80+"px",n.querySelector(".wrapper").style.height=t-80+"px"),"video"===e&&(n.querySelector(".wrapper").style.height=t-80+"px")}this.readingPosition=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset,document.querySelector("html").classList.add("show-safari-bottom_menu"),window.requestAnimFrame((function(){window.requestAnimFrame((function(){t=window.innerHeight,n(e.type,window.innerHeight,e.root,e.hashid)}))})),setTimeout((function(){t!==window.innerHeight&&n(e.type,window.innerHeight,e.root,e.hashid)}),500)}},{key:"updateVideoBackPaneHeight",value:function(){var e=180*window.screen.width/375,t=145*window.screen.width/375;this.root.querySelector(".back-pane-up").style.height=e+"px",this.root.querySelector(".back-pane-down").style.height=t+"px"}},{key:"renderAdWithStyle",value:function(){var e=this,t=this.root.querySelector(".wrapper");setTimeout((function(){var t=window.innerHeight-55;e.closeButton.style.top=t+"px",e.closeButton.style.visibility="unset"}),1e3),""!==this.file&&"video"===this.type&&t.classList.add("ad-full-page__background"),"js"!==this.type&&t.classList.add("ad-full-page--nojs"),"js"===this.type&&t.classList.add("ad-full-page--js"),this.loadingIcon.classList.add("hide"),this.updateAdHeight(),"video"===this.type&&this.updateVideoBackPaneHeight()}},{key:"renderVideo",value:function(){new Li(this).renderVideo()}},{key:"adAnimationActive",value:function(){var e=this;window.requestAnimFrame((function(){window.requestAnimFrame((function(){e.root.classList.add("active")}))}))}},{key:"renderFunctionBar",value:function(){new Oi(this).render()}},{key:"removeFullPageAd",value:function(){this.root.remove(),Bi(),document.querySelector("html").classList.remove("show-safari-bottom_menu"),window.scrollTo(0,this.readingPosition),window.removeEventListener("beforeunload",this.exitPageEvent),this.activeViewRecord.stop(),Vi(this.redirectHref)}},{key:"exitPageEvent",value:function(){this.track.exitPageEvent()}},{key:"bindingEvents",value:function(){var e=this;this.root.addEventListener("transitionend",(function(){e.root.style.willChange="auto"})),window.addEventListener("beforeunload",this.exitPageEvent),this.closeButton.addEventListener("click",(function(t){e.track.clickCloseButtonEvent(),e.removeFullPageAd()}))}},{key:"recordActiveView",value:function(){this.activeViewRecord=new Gi(this),this.activeViewRecord.checkAdLoaded()}},{key:"runAdScript",value:function(){"js"===this.type&&Wi(this.root)}},{key:"render",value:(t=Xt(F.mark((function e(){var t;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAd();case 2:if(0!==(t=e.sent).count){e.next=6;break}return Vi(this.redirectHref),e.abrupt("return");case 6:this.setConfig(t),this.track=new zi({isMobile:this.isMobile,redirectHref:this.redirectHref,adHashId:this.data.hashid}),document.body.insertAdjacentHTML("beforeend",this.getTemplate()),this.getElements(),this.renderAdWithStyle(),this.renderVideo(),this.recordActiveView(),this.runAdScript(),this.renderFunctionBar(),this.bindingEvents(),this.adAnimationActive();case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Yi=function(){function e(t){n(this,e),this.ad=t}return E(e,[{key:"addCallToActionButton",value:function(e){var t,n,i=e.videoWidth(),o=e.videoHeight();t=i*this.ad.root.querySelector(".ad-full-page-video").clientHeight/o,n=(document.body.clientWidth-t)/2+35,this.ad.root.querySelector(".video-ad-button").style.marginRight=n+"px"}},{key:"adjustStyle",value:function(e){if("fullsize"===this.ad.fileType){var t=this.ad.root.querySelector(".video-full-container");e.videoWidth()/e.videoHeight()>1.7?t.classList.add("video-full-container--big"):(t.classList.add("video-full-container--small"),this.ad.root.querySelector(".video-wrap").css("padding-bottom","75%"),"left"===this.ad.videoAlign?t.classList.add("ad-left-video--small"):"right"===this.ad.videoAlign&&t.classList.add("ad-right-video--small"))}}},{key:"showAd",value:function(){this.ad.showAd()}},{key:"renderVideo",value:function(){if("video"===this.ad.type){var e=this.ad,t=this;window.videojs("ad-player",{sources:[{src:this.ad.videofileMp4,type:"video/mp4"},{src:this.ad.videofileWebm,type:"video/webm"}]},(function(){var n=this;this.play(),this.on("loadedmetadata",(function(){t.adjustStyle(n),t.showAd(),"fullsize_without_bg"===t.ad.fileType&&t.addCallToActionButton(n),function(e,t){qi=t,Ci=setInterval((function(){var t=Math.floor(e.currentTime()),n=Math.round(e.duration()),i=Math.round(.5*n),o=Math.round(.7*n),r=[{5:function(){return t}},{10:function(){return t}}],a={},l={};a[i]=function(){return 50},l[o]=function(){return 70},r.push(a,l);for(var s=0;s<r.length;s++){var u=r[s];t in u&&Hi(u[t]())}if(t+1>=n)return Hi(100),5===n&&Hi(5),10===n&&Hi(10),void Bi()}),1e3)}(n,e.videoCallbackUrl)}))}))}}}]),e}();Ki("#ad-full-page.ad-full-page--hidden-tags .tags-wrapper{display:none}#ad-full-page.desktop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:100000006;box-sizing:border-box;min-width:720px;margin:auto;background-color:rgba(0,0,0,.85)}#ad-full-page.desktop .new-style{width:100%;height:100%}#ad-full-page.desktop .new-style .ad-full-page-continue{position:absolute;top:8px;display:inline-block;color:#fff;cursor:pointer}#ad-full-page.desktop .new-style .ad-full-page-continue span{display:inline-block;padding-right:2px;vertical-align:top;font-size:22px;line-height:30px}#ad-full-page.desktop .new-style .ad-full-page-continue img{position:relative;top:-1px;width:30px;height:30px;vertical-align:middle}#ad-full-page.desktop .new-style .ad-click-link{position:absolute;top:0;display:block;width:100%;height:100%}#ad-full-page.desktop .new-style .ad-content{position:fixed;width:100%;height:100%;padding:0}#ad-full-page.desktop .new-style .ad-content__button-wrapper{position:relative}#ad-full-page.desktop .new-style .full-page{height:100%}#ad-full-page.desktop .new-style .full-page .ad-box{position:relative;top:40px;margin:auto;width:100%}#ad-full-page.desktop .new-style .full-page .ad-box img{width:100%;height:auto}#ad-full-page.desktop .new-style .full-page .ad-box iframe{width:100%;height:41.666667vw}#ad-full-page.desktop .new-style .full-page .ad-full-page-continue{right:16px}#ad-full-page.desktop .new-style .video-full-without-bg .ad-full-page-video{position:relative;width:100%;height:41vw;max-height:600px}#ad-full-page.desktop .new-style .video-full-without-bg .video-ad-button{position:absolute;right:0;bottom:65px;display:inline-block;border:1px solid #fff;padding:10px 30px;font-size:18px;line-height:18px;color:#fff;background-color:rgba(0,0,0,.4);border-radius:10px;cursor:pointer}#ad-full-page.desktop .new-style .video-full-with-bg .video-full-container{position:absolute;max-width:760px;max-height:428px}#ad-full-page.desktop .new-style .video-full-with-bg .video-full-container--big{width:46.77777778vw;margin-top:5.9722222222vw}#ad-full-page.desktop .new-style .video-full-with-bg .video-full-container--small{width:39.5833333333vw;margin-top:5.9722222222vw}#ad-full-page.desktop .new-style .video-full-with-bg .video-wrap{position:relative;overflow:hidden;width:100%;height:0;padding-bottom:56.25%}#ad-full-page.desktop .new-style .video-full-with-bg .ad-full-page-video{position:absolute;top:0;left:0;width:100%;height:100%}#ad-full-page.desktop .new-style .video-full-with-bg .ad-right-video{right:40px}#ad-full-page.desktop .new-style .video-full-with-bg .ad-left-video{left:40px}#ad-full-page.desktop .new-style .video-full-with-bg .ad-right-video--small{right:135px}#ad-full-page.desktop .new-style .video-full-with-bg .ad-left-video--small{left:135px}#ad-full-page.desktop .new-style .video-full-with-bg .ad-center-video{right:0;left:0;margin-left:auto;margin-right:auto}#ad-full-page.desktop .new-style .not-full-page{height:100%;overflow:scroll}#ad-full-page.desktop .new-style .not-full-page .ad-header{min-width:720px}#ad-full-page.desktop .new-style .not-full-page .ad-content__button-wrapper{width:970px;margin:0 auto}#ad-full-page.desktop .new-style .not-full-page .ad-box{position:relative;top:40px;margin:auto;width:970px}#ad-full-page.desktop .new-style .not-full-page .ad-box img{min-width:720px}#ad-full-page.desktop .new-style .not-full-page .ad-box>iframe{height:500px}#ad-full-page.desktop .new-style .not-full-page .ad-full-page-continue{right:0}#ad-full-page.desktop .new-style .not-full-page .ad-full-page-video{position:absolute;max-width:512px;max-height:288px;margin-top:81px;margin-right:auto;margin-left:auto}#ad-full-page.desktop .new-style .not-full-page .ad-full-page-iframe{width:970px;height:500px;overflow-y:hidden}#ad-full-page.desktop .new-style .not-full-page .ad-right-video{right:35px}#ad-full-page.desktop .new-style .not-full-page .ad-left-video{left:35px}#ad-full-page.desktop .new-style .not-full-page .ad-center-video{right:0;left:0}#ad-full-page.desktop .new-style .not-full-page .video-not-full-container,#ad-full-page.desktop .new-style .not-full-page .video-without-bg{text-align:center}#ad-full-page.desktop .new-style .not-full-page .video-without-bg .ad-box{display:inline-block;width:auto}#ad-full-page.desktop .new-style .not-full-page .video-without-bg .video-wrap{position:relative;display:inline-block}#ad-full-page.desktop .new-style .not-full-page .video-without-bg .ad-full-page-video{position:relative;width:800px;height:450px;max-width:none;max-height:none;margin-top:0}#ad-full-page.desktop .new-style .not-full-page .video-without-bg .vjs-tech{width:800px;height:auto}#ad-full-page.desktop .new-style .not-full-page .video-without-bg .video-ad-button{position:absolute;right:20px;bottom:110px;display:inline-block;border:1px solid #fff;padding:10px 20px;font-size:16px;line-height:16px;color:#fff;background-color:rgba(0,0,0,.4);border-radius:10px;cursor:pointer}#ad-full-page.desktop .inline-box{display:inline-block}#ad-full-page.desktop .hide{display:none!important}#ad-full-page.desktop .ad-full-page__function{display:-webkit-box;display:flex;height:100px;background-color:#fff}#ad-full-page.desktop .ad-full-page__function *{box-sizing:border-box}#ad-full-page.desktop .ad-full-page__function .ad-full-page__function-inner{display:-webkit-box;display:flex;width:80%;margin:0 auto}#ad-full-page.desktop .ad-full-page__function .author-profile{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;max-width:50%}#ad-full-page.desktop .ad-full-page__function .author-profile__avatar{width:65px;border-radius:50%}#ad-full-page.desktop .ad-full-page__function .author-profile__avatar,#ad-full-page.desktop .ad-full-page__function .author-profile__content{height:65px}#ad-full-page.desktop .ad-full-page__function .author-profile__content{-webkit-box-flex:1;flex:1;padding-left:16px;padding-right:20px;width:calc(100% - 65px)}#ad-full-page.desktop .ad-full-page__function .author-profile__name{font-size:20px;letter-spacing:1.7px;color:#000}#ad-full-page.desktop .ad-full-page__function .author-profile__name:hover{color:#000}#ad-full-page.desktop .ad-full-page__function .author-profile__info{overflow:hidden;margin-top:15px;height:20px;font-size:16px;line-height:normal;letter-spacing:1px;text-overflow:ellipsis;white-space:nowrap}#ad-full-page.desktop .ad-full-page__function .subscribe-btn{display:inline-block;margin-left:16px}#ad-full-page.desktop .ad-full-page__function .tags-wrapper{display:-webkit-box;display:flex;flex-wrap:wrap;-webkit-box-flex:1;flex:1;margin-top:20px;padding-left:15px;border-left:1px solid #dadada;height:65px;line-height:normal}#ad-full-page.desktop .ad-full-page__function .tags-wrapper .new-tags{overflow:hidden;height:25px;border:none;padding:0}#ad-full-page.desktop .ad-full-page__function .tags-wrapper .new-tags .tags{display:inline}#ad-full-page.desktop .ad-full-page__function .tags-wrapper .tag-cate{padding-right:20px;font-size:14px;letter-spacing:1.3px;color:#3d3d3d}#ad-full-page.desktop .ad-full-page__function .tags-wrapper .tag{margin:0 2px;border-radius:6px}#ad-full-page.desktop .ad-full-page__function .tags-wrapper .tag:before{left:0}");Ki("#ad-full-page{@-webkit-keyframes load{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}}#ad-full-page .loading-icon{position:absolute;width:8px;height:8px;margin:250px 50%;border-radius:50%;box-shadow:0 -14px 0 hsla(0,0%,100%,.8),10px -10px 0 hsla(0,0%,100%,.7),14px 0 1px hsla(0,0%,100%,.6),10px 10px 1px hsla(0,0%,100%,.5),0 14px 2px hsla(0,0%,100%,.4),-10px 10px 2px hsla(0,0%,100%,.3),-14px 0 3px hsla(0,0%,100%,.2),-10px -10px 3px hsla(0,0%,100%,.1);opacity:.5;-webkit-transform-origin:50%;transform-origin:50%;-webkit-animation:load .5s steps(8) infinite;animation:load .5s steps(8) infinite}@keyframes load{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}");var Xi=function(){function e(t){var i=this;n(this,e),this.isMobile=!0,this.redirectHref=t,this.track=null,this.activeViewRecord=null,window.pix.adFullPage.redirectToClickLocation=function(){Vi(i.redirectHref)},this.exitPageEvent=this.exitPageEvent.bind(this),this.escapeKeyDownEvent=this.escapeKeyDownEvent.bind(this)}var t;return E(e,[{key:"setConfig",value:function(e){var t=e.ad_slots[0],n=t&&t.ad_list[0],i=n.file,o=n.click_url,r=n.type,a=n.file_content,l=n.file_mime_type,s=n.videofile_mp4,u=n.videofile_webm,c=n.video_callback_url,d=n.video_align,f=n.file_type,p=n.activeview_url;this.slot=t,this.data=n,this.clickUrl=o,this.type=r,this.fileContent=a,this.fileMimeType=l,this.videofileMp4=s,this.videofileWebm=u,this.videoCallbackUrl=c,this.videoAlign=d,this.activeViewUrl=p,this.fileType=f,this.file=this.formatFile(r,i),this.isFullSize=["fullsize","fullsize_without_bg"].includes(f),this.isWithoutBackPane=["970x500_without_bg","fullsize_without_bg"].includes(f)}},{key:"getAd",value:function(){var e,t;return $n("GET",(e=Ei(),t=void 0,e===ii&&(t=si),fi({adPosition:e,mergePosition:t,demoAdNo:"10"===hi?"16b5d40cc4499ee92eab6f42ceb83895":hi})))}},{key:"showAd",value:function(){this.link.classList.remove("hide")}},{key:"addMIBWording",value:function(){if(Si()){var e='<span class="mib--ad-box__icon"><a href="#">痞客邦廣告聯播網</a></span>';if("970x500_without_bg"===this.fileType&&!this.isFullSize)return void this.root.querySelector(".video-wrap").insertAdjacentHTML("beforeend",e);this.root.querySelector(".ad-box").insertAdjacentHTML("beforeend",e)}}},{key:"getElements",value:function(){this.root=document.getElementById("ad-full-page"),this.video=this.root.querySelector(".ad-full-page-video"),this.link=this.root.querySelector(".ad-full-page-link"),this.closeButton=this.root.querySelector(".ad-full-page-continue"),this.loadingIcon=this.root.querySelector(".loading-icon")}},{key:"getVideoTemplate",value:function(){return'\n        <div class="ad-full-page-link hide">\n            '+("\n            <div class='"+(this.isFullSize?"video-full-container ad-"+this.videoAlign+"-video":"video-not-full-container")+"'>\n                <div class='video-wrap'>\n                    <video id=\"ad-player\" class=\"ad-full-page-video "+(this.isFullSize?"":"ad-"+this.videoAlign+"-video")+' video-js" autoplay controls muted controlsList="nodownload noremoteplayback">\n                    </video>\n                    <a href="'+this.clickUrl+'" target="_blank" rel="noopener" >\n                        <div class="video-ad-button" >了解詳情</div>\n                    </a>\n                </div>\n            </div>')+"\n            "+(this.isWithoutBackPane?"":'<div class="back-pane">\n                <iframe class="ad-full-page-iframe" src="'+this.file+'" frameborder="0"></iframe>\n            </div>')+"\n        </div>\n        "}},{key:"getHtmlAndJsTemplate",value:function(){return this.slot.html}},{key:"getImageTemplate",value:function(){return'\n        <div class="ad-full-page-link">\n            <div class="back-pane">\n                <a href="'+this.clickUrl+'" target="_blank" rel="noopener" >\n                    <img src="'+this.file+'" alt="'+this.file+'"/>\n                </a>\n            </div>\n        </div>\n        '}},{key:"getAdTemplateByType",value:function(){var e="";switch(this.type){case"image":e=this.getImageTemplate();break;case"video":e=this.getVideoTemplate();break;case"html5":case"js":e=this.getHtmlAndJsTemplate()}return e}},{key:"formatFile",value:function(e,t){return-1===t.indexOf("clickTAG")&&"video"===e&&(t+="&clickTAG="+encodeURIComponent(this.clickUrl)),"image"===e&&this.fileContent&&this.fileMimeType&&(t="data:"+this.fileMimeType+";base64,"+this.fileContent),t}},{key:"getTemplate",value:function(){var e=this.getAdTemplateByType();return'\n        <div id="ad-full-page" class="desktop">\n            <div class=\'new-style\' >\n                <div class="content-wrap '+(this.isFullSize?"full-page":"not-full-page")+'">\n                    <div class="ad-content"></div>\n                    <div class="ad-content__button-wrapper">\n                        <a class="ad-link ad-full-page-continue">\n                            <span class="ad-link__text">關閉廣告</span>\n                            <svg class="ad-link__svg" width="28px" height="28px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="文字按鈕" transform="translate(-255.000000, -107.000000)" fill="#FFFFFF"> <g id="4" transform="translate(248.000000, 100.000000)"> <path d="M13.65,13.65 L6,13.65 L6,16.35 L13.65,16.35 L13.65,24 L16.35,24 L16.35,16.35 L24,16.35 L24,13.65 L16.35,13.65 L16.35,6 L13.65,6 L13.65,13.65 Z" id="Combined-Shape" transform="translate(15.000000, 15.000000) rotate(-315.000000) translate(-15.000000, -15.000000) "></path> </g> </g> </g> </svg>\n                        </a>\n                    </div>\n                    <div class="loading-icon"></div>\n                    <div class="ad-box">\n                        '+e+"\n                    </div>\n                </div>\n            </div>\n        </div>\n        "}},{key:"renderAdWithStyle",value:function(){"video"===this.type&&("970x500_without_bg"!==this.fileType||this.isFullSize||this.root.querySelector(".ad-content").classList.add("video-without-bg"),"fullsize_without_bg"===this.fileType&&this.root.querySelector(".content-wrap").classList.add("video-full-without-bg"),"fullsize"===this.fileType&&this.root.querySelector(".content-wrap").classList.add("video-full-with-bg"),this.loadingIcon.classList.add("hide"))}},{key:"renderVideo",value:function(){new Yi(this).renderVideo()}},{key:"renderFunctionBar",value:function(){new Oi(this).render()}},{key:"recordActiveView",value:function(){this.activeViewRecord=new Gi(this),this.activeViewRecord.checkAdLoaded()}},{key:"removeFullPageAd",value:function(){this.root.parentNode.removeChild(this.root),Bi(),window.removeEventListener("beforeunload",this.exitPageEvent),document.removeEventListener("keydown",this.escapeKeyDownEvent),Vi(this.redirectHref),this.activeViewRecord.stop(),this.root=null}},{key:"exitPageEvent",value:function(){this.track.exitPageEvent()}},{key:"escapeKeyDownEvent",value:function(e){var t=this;27===e.keyCode&&setTimeout((function(){t.track.escapeKeyDownEvent(),t.removeFullPageAd()}),0)}},{key:"bindingEvents",value:function(){var e=this;window.addEventListener("beforeunload",this.exitPageEvent),this.closeButton.addEventListener("click",(function(t){e.track.clickCloseButtonEvent(),e.removeFullPageAd()})),document.addEventListener("keydown",this.escapeKeyDownEvent),this.root.querySelector(".ad-content").addEventListener("click",(function(t){"ad-content"===t.target.classList[0]&&(e.track.clickOnEdgeEvent(),e.removeFullPageAd())}))}},{key:"runAdScript",value:function(){"js"===this.type&&Wi(this.root)}},{key:"render",value:(t=Xt(F.mark((function e(){var t;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAd();case 2:if(0!==(t=e.sent).count){e.next=6;break}return Vi(this.redirectHref),e.abrupt("return");case 6:this.setConfig(t),this.track=new zi({isMobile:this.isMobile,redirectHref:this.redirectHref,adHashId:this.data.hashid}),document.body.insertAdjacentHTML("beforeend",this.getTemplate()),this.getElements(),this.recordActiveView(),this.runAdScript(),this.renderAdWithStyle(),this.renderVideo(),this.renderFunctionBar(),this.bindingEvents(),this.addMIBWording();case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Zi=function(){var e=!1,t=void 0,n=void 0,i=0,o=1e4,r=xi(),a=Si(),l=pi("wait_footer");function s(){var t=document.querySelectorAll("a");[].concat(Di(t)).forEach((function(t){var n=t.getAttribute("href"),i=t.getAttribute("target"),o=!!i&&"_blank"===i;t.addEventListener("click",(function(t){var i=!!t.target.className.match("pixnet-happix-pilot");(function(e){if(!e||"#"===e)return!1;return!0})(n)&&(e||!c()||i||o||(t.preventDefault(),u(n)))}))}))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;c()&&(e=!0,window.pix.adFullPage&&window.pix.adFullPage.active(t))}function c(){var e=document.querySelector(".idle-pop"),t=pix.MIB.config.hasMIB;return!!r||"none"!==document.body.dataset.showingAdvertisement&&((!pix||!pix.is_owner)&&(!(!a&&t)&&((!e||!e.classList.contains("active"))&&!(!pix.is_owner&&window.pix.f&&window.pix.f.blog.idle&&window.pix.f.blog.idle.hasActived))))}function d(){if(!pix.isMobile&&document[t]&&pix.adFullPage.close(),!e)if(document[t])i=(new Date).getTime();else{var n=(new Date).getTime();0!==i&&n-i>=o&&u()}}return void 0!==document.hidden?(t="hidden",n="visibilitychange"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),{checkShowPopupAd:function(){var e=!location.href.match("/blog/post");if(document.addEventListener(n,d,!1),pix.isMobile&&!e&&!r||l)var t=setInterval((function(){var e=document.querySelector(".relative-article");e&&e.querySelectorAll("li").length>0&&(clearInterval(t),s())}),1e3);else s()}}}(),Qi=function(){function e(t){n(this,e),this.isMobile=!!t,this.redirectHref=null}return E(e,[{key:"render",value:function(){this.ad=this.isMobile?new Ji(this.redirectHref):new Xi(this.redirectHref),this.ad.render()}},{key:"active",value:function(e){this.redirectHref=e,this.render()}},{key:"close",value:function(){this.ad&&this.ad.root&&this.ad.removeFullPageAd()}}]),e}();window.pix.adFullPage=new Qi(window.pix.isMobile),"loading"!==document.readyState?Zi.checkShowPopupAd():document.addEventListener("DOMContentLoaded",(function(){Zi.checkShowPopupAd()})),"true"===pi("fly-ad")&&window.pix.adFullPage.active()}();
