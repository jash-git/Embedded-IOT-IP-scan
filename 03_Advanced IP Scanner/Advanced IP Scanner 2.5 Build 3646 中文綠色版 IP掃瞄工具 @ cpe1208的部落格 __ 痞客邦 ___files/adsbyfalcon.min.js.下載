/** @license: OpenAdViewability (BSD-3 License): https://github.com/picatcha/OpenAdViewability/ */
!function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(){this.getViewabilityState=function(t,e){var n,i=u();if(i.area===1/0)return{error:"Failed to determine viewport"};var r=t.getBoundingClientRect(),o=r.width*r.height,a=d(window.top),c=l(t,e);return n=i.area/o<.5?Math.floor(100*i.area/o):(c.bottom>a.height&&(c.height-=c.bottom-a.height),c.top<0&&(c.height+=c.top),c.left<0&&(c.width+=c.left),c.right>a.width&&(c.width-=c.right-a.width),Math.floor(c.width*c.height*100/o)),{clientWidth:a.width,clientHeight:a.height,objTop:r.top,objBottom:r.bottom,objLeft:r.left,objRight:r.right,percentViewable:n}};var u=function(){for(var t=d(window),e=t.area,n=window;n!==window.top;){n=n.parent;var i=d(n);i.area<e&&(e=i.area,t=i)}return t},d=function(t){var e={width:1/0,height:1/0,area:1/0};return!isNaN(t.document.body.clientWidth)&&0<t.document.body.clientWidth&&(e.width=t.document.body.clientWidth),!isNaN(t.document.body.clientHeight)&&0<t.document.body.clientHeight&&(e.height=t.document.body.clientHeight),t.document.documentElement&&t.document.documentElement.clientWidth&&!isNaN(t.document.documentElement.clientWidth)&&(e.width=t.document.documentElement.clientWidth),t.document.documentElement&&t.document.documentElement.clientHeight&&!isNaN(t.document.documentElement.clientHeight)&&(e.height=t.document.documentElement.clientHeight),t.innerWidth&&!isNaN(t.innerWidth)&&(e.width=Math.min(e.width,t.innerWidth)),t.innerHeight&&!isNaN(t.innerHeight)&&(e.height=Math.min(e.height,t.innerHeight)),e.area=e.height*e.width,e},l=function t(e,n){var i=n,r=n.parent,o={width:0,height:0,left:0,right:0,top:0,bottom:0};if(e){var a=h(e,n);if(a.width=a.right-a.left,a.height=a.bottom-a.top,o=a,i!==r){var c=t(i.frameElement,r);c.bottom<o.bottom&&(c.bottom<o.top&&(o.top=c.bottom),o.bottom=c.bottom),c.right<o.right&&(c.right<o.left&&(o.left=c.right),o.right=c.right),o.width=o.right-o.left,o.height=o.bottom-o.top}}return o},h=function t(e,n){var i=n,r=n.parent,o={left:0,right:0,top:0,bottom:0};if(e){var a=e.getBoundingClientRect();i!==r&&(o=t(i.frameElement,r)),o={left:a.left+o.left,right:a.right+o.left,top:a.top+o.top,bottom:a.bottom+o.top}}return o}}!function(c,u,r){function t(){}c.console=c.console||{log:t,warn:t,error:t,dir:t},Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;o<i;o++)if(e=n[o],t.call(r,e,o,n))return o;return-1}),Array.prototype.filter||(Array.prototype.filter=function(t){if(null==this)throw new TypeError;var e,n,i,r=Object(this),o=r.length>>>0,a=[];if("function"!=typeof t)throw new TypeError;for(a=[],e=2<=arguments.length?arguments[1]:void 0,n=0;n<o;n++)n in r&&(i=r[n],t.call(e,i,n,r)&&a.push(i));return a}),c.requestAnimFrame=c.requestAnimFrame||c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame||c.msRequestAnimationFrame||function(t){c.setTimeout(t,1e3/60)},c.cancelAFrame=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.oCancelAnimationFrame||function(t){c.clearTimeout(t)};var e=!1;function n(){}function i(){e||"loading"===u.readyState||(e=!0,c.setTimeout(function(){o(u)},0))}function o(t){var e,n,i,r,o=[],a=[],c=t.querySelectorAll("ins.adsbyfalcon");for(e=0,n=c.length;e<n;e++){var u,d=c[e],l=d.getAttribute("data-ad-slot"),h=S(d.getAttribute("data-ad-sizes")),f=d.getAttribute("data-merge-position"),m=d.offsetWidth||0,s=d.offsetHeight||0;if(l&&!M(d,"processing")&&!A(d)){if(o.push(l),h&&(l=(u=p((i=b(h),void 0,r=w(),i.concat([r])).sort(y)))?u.slot:l),2199==l||1101==l||2268==l){var g=[{id:l,width:m,height:s,element:d,mergePosition:f}];x(d),v(g);continue}a.push({id:l,width:m,height:s,element:d,mergePosition:f}),x(d)}}o.length&&v(a)}function p(t){var e,n=w().width;if(1===(e=t.filter(function(t){return n>=t.width})).length)return(e=(e=t.reverse().slice(0,2)).filter(function(t){return{}.hasOwnProperty.call(t,"slot")}))[0];var i,r,o=e.findIndex(function(t){return!t.slot&&t.width===n}),a=o-1,c=o+1,u=t[o].width;return 0===o?e[1]:e.length-1===o?e[a]:(i=e[a].width,r=e[c].width,Math.abs(r-u)<Math.abs(i-u)?e[c]:e[a])}function w(){var t=Math.max(c.innerWidth,u.documentElement.clientWidth);return 793<=t&&t<=807&&(t=800),1017<=t&&t<=1031&&(t=1024),{width:t,height:Math.max(c.innerHeight,u.documentElement.clientHeight)}}function b(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push({resolution:e,slot:t[e],width:Math.floor(e.match(/^\d+/)[0]),height:Math.floor(e.match(/\d+$/)[0])});return n}function y(t,e){return t.width!==e.width?e.width>t.width?1:e.width<t.width?-1:0:e.height>t.height?1:e.height<t.height?-1:0}function d(t,e,n,i){if("false"===t.getAttribute("data-embed"))return t.innerHTML=i,void function t(e){if("SCRIPT"===e.tagName)return e.parentNode.replaceChild(a(e),e),e;var n=0,i=e.childNodes;c.pix&&"INS"===e.tagName&&e&&e.classList&&e.classList.add("pixnet-ad");for(;n<i.length;)t(i[n++]);return e}(t);c.pix&&t&&t.classList&&t.classList.add("pixnet-ad");var r=u.createElement("iframe"),o="margin:0;padding:0;overflow:hidden;background-color:transparent;";r.setAttribute("allowfullscreen","auto"),r.setAttribute("style",o+"border:none;width:"+e+"px;height:"+n+"px;"),r.setAttribute("scrolling","no"),t.innerHTML="",t.appendChild(r),r.contentDocument.open(),r.contentDocument.write(i),r.contentDocument.body&&r.contentDocument.body.setAttribute("style",o),r.contentDocument.close()}function a(t){var e=u.createElement("script");e.text=t.innerHTML;for(var n=t.attributes.length-1;0<=n;n--)e.setAttribute(t.attributes[n].name,t.attributes[n].value);return e}function v(e){var t="11"!==m("preview_mib_fly_mobile_image_ad")?m("demo_ad_no"):"75ecc55cd322ced48ae2d4c7717a0891",n=t?"&demo_ad_no="+t:"",i="https://"+(function(){for(var t=u.getElementsByTagName("script"),e=/\/\/([^.]*falcon)-asset\.pixfs\.net/g,n=0,i=t.length;n<i;n++){var r=e.exec(t[n].getAttribute("src"));if(r)return r[1]}}()||"falcon")+".pixnet.net/ad/json?"+function(t){for(var e="",n=[],i=0,r=t.length;i<r;i++){var o=t[i],a="";o.mergePosition&&-1===n.indexOf(o.id)&&(n.push(o.id),a="&merge_position["+o.id+"]="+o.mergePosition),e=e+l(o,a)+(i!==r-1?"&":"")}return e}(e)+"&version=2&sdk_version=20200420v1&t="+(new Date).getTime()+n+function(){var t=function(t){var e=("; "+u.cookie).split("; "+t+"=");return 2!==e.length?"":e.pop().split("; ").shift()}("pixtag");return t?"&pixtag="+t:""}(),r=h("falcon:blogcategory"),o=h("falcon:articlecategory");r&&(i+="&blog_category="+r),o&&(i+="&article_category="+o),u.referrer&&(i+="&referrer="+encodeURI(u.referrer));var a=new XMLHttpRequest;c.XDomainRequest&&((a=new XDomainRequest).onprogress=function(){},a.ontimeout=function(){},a.onerror=function(){}),a.onload=function(){var t=S(this.responseText);(function(t){return t&&t instanceof Array})(t.ad_slots)&&t.ad_slots.length&&function(t,e){for(;e.length;){var n=e.shift(),i=t.shift();if(i&&!A(i.element)){if(0===n.ad_num){i.element.parentNode.removeChild(i.element),"1101"!==i.id&&"2199"!==i.id&&"2268"!==i.id||(u.querySelector("#main > .header-fixed-area").style.display="none");continue}d(i.element,i.width,i.height,n.html),f(i.element,"done"),void 0!==c.pix&&s(i.element,n)}}}(e,t.ad_slots)},a.addEventListener&&a.addEventListener("error",function(){},!1),a.open("get",i,!0),a.withCredentials=!0,a.send()}function l(t,e){var n=1<arguments.length&&void 0!==e?e:"";return"pos[]="+t.id+","+t.width+","+t.height+n}function h(t){var e=u.querySelector('meta[property="'+t+'"]');return e&&e.getAttribute("content")}function x(t){return f(t,"processing")}function A(t){return M(t,"done")}function M(t,e){return!!t&&e===t.getAttribute("data-adsbyfalcon-status")}function f(t,e){return!!t&&t.setAttribute("data-adsbyfalcon-status",e)}function S(t){try{return JSON.parse(t)}catch(t){return{}}}function m(t){if(!t)return"";for(var e=c.location,n=(e.search.substring(1)||e.hash.split("?")[1]||"").split("&"),i=0;i<n.length;i++){var r=n[i].split("=");if(r[0]===t)return decodeURIComponent(r[1].replace(/\+/g," "))}return""}function s(n,i){var r=n.querySelector("[data-falcon-ad]")||n.querySelector("img, iframe"),o=function(t){return!!t.match(/backdrop/)}(n.innerHTML),a=function(t){return!!t.match(/oneadIRDFPTag/)}(n.innerHTML),c=function(t){return!!t.match(/truvid/)}(n.innerHTML);!function(t){return!!t.match(/popIn_recommend/)}(n.innerHTML)||r?r?0!==i.ad_list.length&&r.addEventListener("load",function t(){var e=r;o&&(e=n.querySelector("div[data-type]")),a&&(e=n.querySelector("#video_click_area0")),c&&(e=n.querySelector(".trvd_video_player")),g(e,i),r.removeEventListener("load",t,!1)}):n.addEventListener("DOMSubtreeModified",function t(){(n.querySelector("[data-falcon-ad]")||n.querySelector("img, iframe"))&&(s(n,i),n.removeEventListener("DOMSubtreeModified",t,!1))}):n.addEventListener("DOMSubtreeModified",function t(){n.removeEventListener("DOMSubtreeModified",t,!1),g(n,i)})}function g(t,e){var n=e.ad_list[0].activeview_url,i=new r;n&&i.checkViewability(t,function(t){t.viewabilityStatus&&((new Image).src=n)})}u.addEventListener("readystatechange",i),c.PIXFalcon=(n.prototype.placeAds=function(t){var e,n,i;if(u!==t){if(0!==(n=(e=u.querySelectorAll(t)).length))for(i=0;i<n;i++)o(e[i])}else o(u)},n.prototype.placeAdByNode=function(t){o(t)},n),i()}(window,document,function(){var s={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabilityStatus:!1,duration:0};this.DEBUG_MODE=!1,this.checkViewability=function(i,r){var o=u(),a=this,c=window.requestAnimFrame(function t(){l(i)||(o=u(),d());var e=u()-o;var n=1e3<=e;s.duration=e;n?(s.viewabilityStatus=!0,a.DEBUG_MODE||window.cancelAFrame(c)):c=window.requestAnimFrame(t);r(s)});function u(){return"object"===t(window.performance)?window.performance.now():(new Date).getTime()}};var d=function(){s.percentObscured=0,s.duration=0,s.viewabilityStatus=!1},l=function(t){var e=t.getBoundingClientRect();return 242500<=e.width*e.height&&(s.acceptedViewablePercentage=30),!i(t)&&(!r(t)&&(!n(t).error&&(!(s.percentViewable&&s.percentViewable<s.acceptedViewablePercentage)&&s.percentViewable)))},n=function(t){var e=new a;s.percentObscured=s.percentObscured||0;var n=e.getViewabilityState(t,window);return n.error||(s.percentViewable=n.percentViewable-s.percentObscured),n},i=function(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("visibility"),i=e.getPropertyValue("display");return"hidden"===n||"none"===i},r=function(t){var e=t.getBoundingClientRect(),n=e.left+12,i=e.right-12,r=Math.max(0,e.top+12),o=e.bottom-12,a=Math.floor(e.left+e.width/2),c=Math.floor(e.top+e.height/2),u=[{x:n,y:r},{x:a,y:r},{x:i,y:r},{x:n,y:c},{x:a,y:c},{x:i,y:c},{x:n,y:o},{x:a,y:o},{x:i,y:o}],d=[];for(var l in u)if(u.hasOwnProperty(l)&&u[l]&&0<=u[l].x&&0<=u[l].y){var h=document.elementFromPoint(u[l].x,u[l].y);if(p(t,h)){var f=h.getBoundingClientRect();if(e.top>f.bottom)continue;var m=w(e,f);if(0<m&&(g(d,h)||d.push({el:h,area:m}),s.percentObscured>100-s.acceptedViewablePercentage))return!0}}return s.percentObscured=0<d.length?100*d.map(function(t){return t.area}).reduce(function(t,e){return Math.max(t,e)}):0,s.percentViewable=100-s.percentObscured,!1},g=function(t,e){return 0<t.length&&t.map(function(t){return t.el}).some(function(t){return t===e})},p=function(t,e){return null!==e&&t!==e&&!t.contains(e)&&!e.contains(t)&&!o(t,e)},o=function(t,e){var n=e.nodeName,i=window.getComputedStyle(e,null),r=t.getBoundingClientRect(),o=e.getBoundingClientRect(),a=r.top===o.top&&r.bottom===o.bottom&&r.left===o.left&&r.right===o.right&&r.height===o.height&&r.width===o.width;return 0===e.childNodes.length&&("DIV"===n||"SPAN"===n)&&"none"===i.backgroundImage&&"none"===i.borderStyle&&"rgba(0, 0, 0, 0)"===i.backgroundColor&&a},w=function(t,e){var n=t.width*t.height;return Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top))/n}})}();
